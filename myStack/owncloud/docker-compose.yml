version: "2.0"

services:

  owncloud:
    build: .
    volumes:
      - /mnt/pi3/nextcloud/data:/var/www/html/data 
      - /mnt/pi3/nextcloud/config:/var/www/html/config 
      - /mnt/pi3/nextcloud/apps:/var/www/html/apps
      - /mnt/pi3/nextcloud/theme:/var/www/html/themes
    networks:
      - main_middle
    labels:
      traefik.port: "80"
      traefik.frontend.rule: "Host:cloud.thibbo.duckdns.org"
      traefik.backend: "owncloud"
      traefik.docker.network: "main_middle"
    restart: always

#  owncloud-cron:
#    build: ../../myImages/rpi-owncloud-cron
#    networks:
#      - owncloud-data
#    labels:
#      traefik.enable: "false"
#    links:
#      - "owncloud:owncloud-cron"
#    tty: true
    
networks:
  main_middle:
    external: true
